{"version":3,"sources":["public/src/client/account/posts.js"],"names":["define","header","infinitescroll","AccountPosts","template","page","init","$","addClass","handleInfiniteScroll","_template","ajaxify","data","pagination","currentPage","config","usePagination","loadMore","direction","params","utils","loadMoreXhr","done","posts","length","onPostsLoaded","callback","app","parseAndTranslate","html","append","find","timeago","createUserTooltips","makeNumbersHumanReadable","window","trigger"],"mappings":"AAAA,aAGAA,OAAO,uBAAwB,uBAAwB,wBAAyB,SAAUC,EAAQC,GACjG,IAAIC,KAEJ,IAAIC,EACJ,IAAIC,EAAO,EAEXF,EAAaG,KAAO,WACnBL,EAAOK,OAEPC,EAAE,uDAAuDC,SAAS,kBAElEL,EAAaM,qBAAqB,kBAGnCN,EAAaM,qBAAuB,SAAUC,GAC7CN,EAAWM,EACXL,EAAOM,QAAQC,KAAKC,WAAWC,YAC/B,IAAKC,OAAOC,cAAe,CAC1Bd,EAAeI,KAAKW,KAItB,SAASA,EAASC,GACjB,GAAIA,EAAY,EAAG,CAClB,OAED,IAAIC,EAASC,MAAMD,SACnBd,GAAQ,EACRc,EAAOd,KAAOA,EAEdH,EAAemB,YAAYF,EAAQ,SAAUP,EAAMU,GAClD,GAAIV,EAAKW,OAASX,EAAKW,MAAMC,OAAQ,CACpCC,EAAcb,EAAKW,MAAOD,OACpB,CACNA,OAKH,SAASG,EAAcF,EAAOG,GAC7BC,IAAIC,kBAAkBxB,EAAU,SAAWmB,MAAOA,GAAS,SAAUM,GACpEtB,EAAE,uBAAuBuB,OAAOD,GAChCA,EAAKE,KAAK,4BAA4BvB,SAAS,kBAC/CqB,EAAKE,KAAK,YAAYC,UACtBL,IAAIM,qBACJb,MAAMc,yBAAyBL,EAAKE,KAAK,2BACzCxB,EAAE4B,QAAQC,QAAQ,uBAAyBb,MAAOA,IAClDG,MAIF,OAAOvB","file":"public/src/client/account/posts.js","sourcesContent":["'use strict';\n\n\ndefine('forum/account/posts', ['forum/account/header', 'forum/infinitescroll'], function (header, infinitescroll) {\n\tvar AccountPosts = {};\n\n\tvar template;\n\tvar page = 1;\n\n\tAccountPosts.init = function () {\n\t\theader.init();\n\n\t\t$('[component=\"post/content\"] img:not(.not-responsive)').addClass('img-responsive');\n\n\t\tAccountPosts.handleInfiniteScroll('account/posts');\n\t};\n\n\tAccountPosts.handleInfiniteScroll = function (_template) {\n\t\ttemplate = _template;\n\t\tpage = ajaxify.data.pagination.currentPage;\n\t\tif (!config.usePagination) {\n\t\t\tinfinitescroll.init(loadMore);\n\t\t}\n\t};\n\n\tfunction loadMore(direction) {\n\t\tif (direction < 0) {\n\t\t\treturn;\n\t\t}\n\t\tvar params = utils.params();\n\t\tpage += 1;\n\t\tparams.page = page;\n\n\t\tinfinitescroll.loadMoreXhr(params, function (data, done) {\n\t\t\tif (data.posts && data.posts.length) {\n\t\t\t\tonPostsLoaded(data.posts, done);\n\t\t\t} else {\n\t\t\t\tdone();\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction onPostsLoaded(posts, callback) {\n\t\tapp.parseAndTranslate(template, 'posts', { posts: posts }, function (html) {\n\t\t\t$('[component=\"posts\"]').append(html);\n\t\t\thtml.find('img:not(.not-responsive)').addClass('img-responsive');\n\t\t\thtml.find('.timeago').timeago();\n\t\t\tapp.createUserTooltips();\n\t\t\tutils.makeNumbersHumanReadable(html.find('.human-readable-number'));\n\t\t\t$(window).trigger('action:posts.loaded', { posts: posts });\n\t\t\tcallback();\n\t\t});\n\t}\n\n\treturn AccountPosts;\n});\n"]}