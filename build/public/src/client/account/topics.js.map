{"version":3,"sources":["public/src/client/account/topics.js"],"names":["define","header","infinitescroll","AccountTopics","template","page","init","handleInfiniteScroll","_template","ajaxify","data","pagination","currentPage","config","usePagination","loadMore","direction","params","utils","loadMoreXhr","done","topics","length","onTopicsLoaded","callback","app","parseAndTranslate","html","$","append","find","timeago","createUserTooltips","makeNumbersHumanReadable","window","trigger"],"mappings":"AAAA,aAGAA,OAAO,wBAAyB,uBAAwB,wBAAyB,SAAUC,EAAQC,GAClG,IAAIC,KAEJ,IAAIC,EACJ,IAAIC,EAAO,EAEXF,EAAcG,KAAO,WACpBL,EAAOK,OAEPH,EAAcI,qBAAqB,mBAGpCJ,EAAcI,qBAAuB,SAAUC,GAC9CJ,EAAWI,EACXH,EAAOI,QAAQC,KAAKC,WAAWC,YAC/B,IAAKC,OAAOC,cAAe,CAC1BZ,EAAeI,KAAKS,KAItB,SAASA,EAASC,GACjB,GAAIA,EAAY,EAAG,CAClB,OAED,IAAIC,EAASC,MAAMD,SACnBZ,GAAQ,EACRY,EAAOZ,KAAOA,EAEdH,EAAeiB,YAAYF,EAAQ,SAAUP,EAAMU,GAClD,GAAIV,EAAKW,QAAUX,EAAKW,OAAOC,OAAQ,CACtCC,EAAeb,EAAKW,OAAQD,OACtB,CACNA,OAKH,SAASG,EAAeF,EAAQG,GAC/BC,IAAIC,kBAAkBtB,EAAU,UAAYiB,OAAQA,GAAU,SAAUM,GACvEC,EAAE,0BAA0BC,OAAOF,GACnCA,EAAKG,KAAK,YAAYC,UACtBN,IAAIO,qBACJd,MAAMe,yBAAyBN,EAAKG,KAAK,2BACzCF,EAAEM,QAAQC,QAAQ,wBAA0Bd,OAAQA,IACpDG,MAIF,OAAOrB","file":"public/src/client/account/topics.js","sourcesContent":["'use strict';\n\n\ndefine('forum/account/topics', ['forum/account/header', 'forum/infinitescroll'], function (header, infinitescroll) {\n\tvar AccountTopics = {};\n\n\tvar template;\n\tvar page = 1;\n\n\tAccountTopics.init = function () {\n\t\theader.init();\n\n\t\tAccountTopics.handleInfiniteScroll('account/topics');\n\t};\n\n\tAccountTopics.handleInfiniteScroll = function (_template) {\n\t\ttemplate = _template;\n\t\tpage = ajaxify.data.pagination.currentPage;\n\t\tif (!config.usePagination) {\n\t\t\tinfinitescroll.init(loadMore);\n\t\t}\n\t};\n\n\tfunction loadMore(direction) {\n\t\tif (direction < 0) {\n\t\t\treturn;\n\t\t}\n\t\tvar params = utils.params();\n\t\tpage += 1;\n\t\tparams.page = page;\n\n\t\tinfinitescroll.loadMoreXhr(params, function (data, done) {\n\t\t\tif (data.topics && data.topics.length) {\n\t\t\t\tonTopicsLoaded(data.topics, done);\n\t\t\t} else {\n\t\t\t\tdone();\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction onTopicsLoaded(topics, callback) {\n\t\tapp.parseAndTranslate(template, 'topics', { topics: topics }, function (html) {\n\t\t\t$('[component=\"category\"]').append(html);\n\t\t\thtml.find('.timeago').timeago();\n\t\t\tapp.createUserTooltips();\n\t\t\tutils.makeNumbersHumanReadable(html.find('.human-readable-number'));\n\t\t\t$(window).trigger('action:topics.loaded', { topics: topics });\n\t\t\tcallback();\n\t\t});\n\t}\n\n\treturn AccountTopics;\n});\n"]}