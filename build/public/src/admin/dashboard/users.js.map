{"version":3,"sources":["public/src/admin/dashboard/users.js"],"names":["define","graph","hooks","ACP","init","set","dataset","ajaxify","data","then","onPage","updateTable","window","fetch","config","relative_path","url","location","search","credentials","response","ok","json","payload","app","parseAndTranslate","template","name","html","tbodyEl","document","querySelector","innerHTML","append","map","idx","el","find","timeago"],"mappings":"AAAA,aAEAA,OAAO,yBAA0B,qCAAsC,SAAU,CAACC,EAAOC,KACxF,MAAMC,KAENA,EAAIC,KAAO,MACVH,EAAMG,MACLC,IAAK,gBACLC,QAASC,QAAQC,KAAKF,UACpBG,KAAK,KACPP,EAAMQ,OAAO,qCAAsCP,EAAIQ,iBAIzDR,EAAIQ,YAAc,MACjB,GAAIC,OAAOC,MAAO,CACjBA,SAASC,OAAOC,oBAAoBR,QAAQC,KAAKQ,MAAMJ,OAAOK,SAASC,UAAYC,YAAa,YAAaV,KAAMW,IAClH,GAAIA,EAASC,GAAI,CAChBD,EAASE,OAAOb,KAAK,SAAUc,GAC9BC,IAAIC,kBAAkBlB,QAAQC,KAAKkB,SAASC,KAAM,QAASJ,EAAS,SAAUK,GAC7E,MAAMC,EAAUC,SAASC,cAAc,qBACvCF,EAAQG,UAAY,GACpBH,EAAQI,UAAUL,EAAKM,IAAI,CAACC,EAAKC,IAAOA,IAExCR,EAAKS,KAAK,YAAYC,oBAQ5B,OAAOnC","file":"public/src/admin/dashboard/users.js","sourcesContent":["'use strict';\n\ndefine('admin/dashboard/users', ['admin/modules/dashboard-line-graph', 'hooks'], (graph, hooks) => {\n\tconst ACP = {};\n\n\tACP.init = () => {\n\t\tgraph.init({\n\t\t\tset: 'registrations',\n\t\t\tdataset: ajaxify.data.dataset,\n\t\t}).then(() => {\n\t\t\thooks.onPage('action:admin.dashboard.updateGraph', ACP.updateTable);\n\t\t});\n\t};\n\n\tACP.updateTable = () => {\n\t\tif (window.fetch) {\n\t\t\tfetch(`${config.relative_path}/api${ajaxify.data.url}${window.location.search}`, { credentials: 'include' }).then((response) => {\n\t\t\t\tif (response.ok) {\n\t\t\t\t\tresponse.json().then(function (payload) {\n\t\t\t\t\t\tapp.parseAndTranslate(ajaxify.data.template.name, 'users', payload, function (html) {\n\t\t\t\t\t\t\tconst tbodyEl = document.querySelector('.users-list tbody');\n\t\t\t\t\t\t\ttbodyEl.innerHTML = '';\n\t\t\t\t\t\t\ttbodyEl.append(...html.map((idx, el) => el));\n\n\t\t\t\t\t\t\thtml.find('.timeago').timeago();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\treturn ACP;\n});\n"]}