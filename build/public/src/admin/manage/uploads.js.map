{"version":3,"sources":["public/src/admin/manage/uploads.js"],"names":["define","uploader","api","Uploads","init","$","on","show","title","route","config","relative_path","params","folder","ajaxify","data","currentFolder","refresh","file","this","parents","bootbox","confirm","ok","del","path","attr","then","remove","catch","app","alertError"],"mappings":"AAAA,aAGAA,OAAO,wBAAyB,WAAY,OAAQ,SAAUC,EAAUC,GACvE,IAAIC,KAEJA,EAAQC,KAAO,WACdC,EAAE,WAAWC,GAAG,QAAS,WACxBL,EAASM,MACRC,MAAO,uCACPC,MAAOC,OAAOC,cAAgB,yBAC9BC,QAAUC,OAAQC,QAAQC,KAAKC,gBAC7B,WACFF,QAAQG,cAIVZ,EAAE,WAAWC,GAAG,QAAS,WACxB,IAAIY,EAAOb,EAAEc,MAAMC,QAAQ,eAC3BC,QAAQC,QAAQ,0CAA2C,SAAUC,GACpE,IAAKA,EAAI,CACR,OAGDrB,EAAIsB,IAAI,UACPC,KAAMP,EAAKQ,KAAK,eACdC,KAAK,KACPT,EAAKU,WACHC,MAAMC,IAAIC,iBAKhB,OAAO5B","file":"public/src/admin/manage/uploads.js","sourcesContent":["'use strict';\n\n\ndefine('admin/manage/uploads', ['uploader', 'api'], function (uploader, api) {\n\tvar Uploads = {};\n\n\tUploads.init = function () {\n\t\t$('#upload').on('click', function () {\n\t\t\tuploader.show({\n\t\t\t\ttitle: '[[admin/manage/uploads:upload-file]]',\n\t\t\t\troute: config.relative_path + '/api/admin/upload/file',\n\t\t\t\tparams: { folder: ajaxify.data.currentFolder },\n\t\t\t}, function () {\n\t\t\t\tajaxify.refresh();\n\t\t\t});\n\t\t});\n\n\t\t$('.delete').on('click', function () {\n\t\t\tvar file = $(this).parents('[data-path]');\n\t\t\tbootbox.confirm('[[admin/manage/uploads:confirm-delete]]', function (ok) {\n\t\t\t\tif (!ok) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tapi.del('/files', {\n\t\t\t\t\tpath: file.attr('data-path'),\n\t\t\t\t}).then(() => {\n\t\t\t\t\tfile.remove();\n\t\t\t\t}).catch(app.alertError);\n\t\t\t});\n\t\t});\n\t};\n\n\treturn Uploads;\n});\n"]}