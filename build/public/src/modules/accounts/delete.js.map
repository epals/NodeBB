{"version":3,"sources":["public/src/modules/accounts/delete.js"],"names":["define","api","Delete","account","uid","callback","executeAction","content","purge","confirmText","path","successText","bootbox","confirm","del","then","app","alertSuccess","catch","err","alertError"],"mappings":"AAAA,aAEAA,OAAO,mBAAoB,MAAO,WAAY,SAAUC,GACvD,IAAIC,KAEJA,EAAOC,QAAU,SAAUC,EAAKC,GAC/BC,EACCF,EACA,uCACA,WACA,2BACAC,IAIFH,EAAOK,QAAU,SAAUH,EAAKC,GAC/BC,EACCF,EACA,0CACA,WACA,mCACAC,IAIFH,EAAOM,MAAQ,SAAUJ,EAAKC,GAC7BC,EACCF,EACA,8BACA,GACA,2BACAC,IAIF,SAASC,EAAcF,EAAKK,EAAaC,EAAMC,EAAaN,GAC3DO,QAAQC,QAAQJ,EAAa,SAAUI,GACtC,IAAKA,EAAS,CACb,OAGDZ,EAAIa,cAAcV,IAAMM,QAAYK,KAAK,KACxCC,IAAIC,aAAaN,GAEjB,UAAWN,IAAa,WAAY,CACnC,OAAOA,OAENa,MAAM,SAAUC,GAClBH,IAAII,WAAWD,OAKlB,OAAOjB","file":"public/src/modules/accounts/delete.js","sourcesContent":["'use strict';\n\ndefine('accounts/delete', ['api', 'bootbox'], function (api) {\n\tvar Delete = {};\n\n\tDelete.account = function (uid, callback) {\n\t\texecuteAction(\n\t\t\tuid,\n\t\t\t'[[user:delete_this_account_confirm]]',\n\t\t\t'/account',\n\t\t\t'[[user:account-deleted]]',\n\t\t\tcallback\n\t\t);\n\t};\n\n\tDelete.content = function (uid, callback) {\n\t\texecuteAction(\n\t\t\tuid,\n\t\t\t'[[user:delete_account_content_confirm]]',\n\t\t\t'/content',\n\t\t\t'[[user:account-content-deleted]]',\n\t\t\tcallback\n\t\t);\n\t};\n\n\tDelete.purge = function (uid, callback) {\n\t\texecuteAction(\n\t\t\tuid,\n\t\t\t'[[user:delete_all_confirm]]',\n\t\t\t'',\n\t\t\t'[[user:account-deleted]]',\n\t\t\tcallback\n\t\t);\n\t};\n\n\tfunction executeAction(uid, confirmText, path, successText, callback) {\n\t\tbootbox.confirm(confirmText, function (confirm) {\n\t\t\tif (!confirm) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tapi.del(`/users/${uid}${path}`, {}).then(() => {\n\t\t\t\tapp.alertSuccess(successText);\n\n\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\treturn callback();\n\t\t\t\t}\n\t\t\t}).catch(function (err) {\n\t\t\t\tapp.alertError(err);\n\t\t\t});\n\t\t});\n\t}\n\n\treturn Delete;\n});\n"]}